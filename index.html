<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Á©∫„ÇÇ„Çà„ÅÜÔºü</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --glass: rgba(255,255,255,0.04);
    --accent:#ffd166;
    --muted: #9aa4b2;
    --white: #edf2f7;
    --card-radius:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Hiragino Kaku Gothic ProN", "Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#071021 0%, #0f2a43 60%);
    color:var(--white);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
  }

  .card{
    width:360px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: var(--card-radius);
    padding:20px;
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
    backdrop-filter: blur(6px);
  }

  .top{
    display:flex;
    align-items:center;
    justify-content:space-between;
  }
  .location{
    font-size:14px;
    color:var(--muted);
  }
  .title{
    font-size:18px;
    font-weight:700;
    letter-spacing:0.2px;
  }

  .main{
    display:flex;
    gap:16px;
    align-items:center;
    margin-top:18px;
  }

  .visual{
    width:140px;
    height:140px;
    position:relative;
    border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  /* sun */
  .sun{
    width:68px;
    height:68px;
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #fff59d, #ffd54a 40%, #ffb300 100%);
    box-shadow: 0 6px 30px rgba(255,180,0,0.25);
    animation: spin-sun 12s linear infinite;
  }
  @keyframes spin-sun{
    from{transform: rotate(0deg)}
    to{transform: rotate(360deg)}
  }

  /* clouds */
  .cloud{
    position:absolute;
    width:120px;
    height:60px;
    top:20px;
    left:10px;
    border-radius:40px;
    background: linear-gradient(180deg,#eef2f7 0%,#dfe7ef 100%);
    filter: blur(0.5px);
    opacity:0.96;
    animation: float-cloud 6s ease-in-out infinite;
  }
  .cloud:before, .cloud:after{
    content:"";
    position:absolute;
    background: inherit;
    width:50px;
    height:50px;
    border-radius:50%;
    top:-20px;
    left:10px;
  }
  .cloud:after{left:50px; top:-10px; transform: scale(0.85)}
  @keyframes float-cloud{
    0%{transform: translateY(0px)}
    50%{transform: translateY(6px)}
    100%{transform: translateY(0px)}
  }

  /* rain */
  .rain{
    position:absolute;
    width:100%;
    height:100%;
    pointer-events:none;
    top:0; left:0;
  }
  .drop{
    position:absolute;
    width:2px;
    height:14px;
    bottom:10px;
    border-radius:2px;
    opacity:0.9;
    transform: translateY(-10px);
    animation: fall 0.9s linear infinite;
    background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.3));
  }
  @keyframes fall{
    0%{transform: translateY(-30px); opacity:0}
    10%{opacity:1}
    100%{transform: translateY(90px); opacity:0}
  }

  /* snow */
  .snow{
    position:absolute;
    width:100%;
    height:100%;
    pointer-events:none;
    top:0; left:0;
  }
  .flake{
    position:absolute;
    width:6px;
    height:6px;
    border-radius:50%;
    background: rgba(255,255,255,0.9);
    opacity:0.95;
    animation: drift linear infinite;
  }
  @keyframes drift{
    0%{transform: translateY(-20px) translateX(0)}
    50%{transform: translateY(40px) translateX(8px)}
    100%{transform: translateY(110px) translateX(-10px)}
  }

  .info{
    flex:1;
    padding-right:6px;
  }
  .temp{
    font-size:40px;
    font-weight:800;
    line-height:1;
  }
  .desc{
    margin-top:6px;
    color:var(--muted);
    font-size:14px;
  }
  .controls{
    margin-top:16px;
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:space-between;
  }

  .btn{
    background:var(--glass);
    border: none;
    padding:8px 12px;
    border-radius:10px;
    color:var(--white);
    cursor:pointer;
    font-weight:600;
    box-shadow: 0 4px 12px rgba(2,6,23,0.6);
    transition: transform .12s ease;
  }
  .btn:active{transform: scale(.98)}
  .btn.primary{
    background: linear-gradient(90deg,#ffd166,#ff9f1c);
    color:#071021;
  }
  .toggle{
    display:inline-flex;
    align-items:center;
    gap:8px;
    font-size:13px;
  }

  .meta{
    margin-top:12px;
    font-size:12px;
    color:var(--muted);
    text-align:center;
  }

  /* small responsive */
  @media (max-width:420px){
    .card{width:100%}
    .visual{width:120px;height:120px}
    .temp{font-size:34px}
  }
</style>
</head>
<body>
  <div class="card" id="app">
    <div class="top">
      <div>
        <div class="title">Á©∫„ÇÇ„Çà„ÅÜÔºü</div>
        <div class="location" id="city">‚Äî</div>
      </div>
      <div style="text-align:right">
        <div style="font-size:12px;color:var(--muted)">Êõ¥Êñ∞</div>
        <div id="time" style="font-size:12px;color:var(--muted)">‚Äî</div>
      </div>
    </div>

    <div class="main">
      <div class="visual" id="visual">
        <!-- dynamic visuals go here -->
      </div>
      <div class="info">
        <div class="temp" id="temp">--¬∞C</div>
        <div class="desc" id="desc">‚Äî</div>

        <div class="controls">
          <div>
            <button class="btn primary" id="randomBtn">Êõ¥Êñ∞</button>
            <button class="btn" id="toggleAnimBtn">„Ç¢„Éã„É°ÂàáÊõø</button>
          </div>
          <div class="toggle">
            <label id="unitLabel">‚ÑÉ</label>
            <input type="checkbox" id="unitToggle" aria-label="‚ÑÉ/‚Ñâ" />
          </div>
        </div>

        <div class="meta" id="meta">Â§©Ê∞ó„Ç®„Éï„Çß„ÇØ„Éà: ‚Äî</div>
      </div>
    </div>
  </div>

<script>
(function(){
  const cities = ["Êù±‰∫¨","Â§ßÈò™","Êú≠Âπå","‰∫¨ÈÉΩ","Á¶èÂ≤°","ÂêçÂè§Â±ã","ÈÇ£Ë¶á","„Éã„É•„Éº„É®„Éº„ÇØ","„É≠„É≥„Éâ„É≥","„Éë„É™","„ÇΩ„Ç¶„É´","„Éù„Éº„Éà„Ç™„Éñ„Çπ„Éö„Ç§„É≥","„Ç´„Ç§„É≠"];
  const weatherTypes = [
    { id:"sunny", name:"Êô¥„Çå", tempRange:[18,32], emoji:"‚òÄÔ∏è" },
    { id:"cloudy", name:"Êõá„Çä", tempRange:[10,22], emoji:"‚òÅÔ∏è" },
    { id:"rain", name:"Èõ®", tempRange:[6,20], emoji:"üåßÔ∏è" },
    { id:"snow", name:"Èõ™", tempRange:[-8,4], emoji:"‚ùÑÔ∏è" },
    { id:"storm", name:"Èõ∑Èõ®", tempRange:[12,26], emoji:"‚õàÔ∏è" },
    { id:"fog", name:"Èúß", tempRange:[2,16], emoji:"üå´Ô∏è" }
  ];

  const app = {
    el: document.getElementById('app'),
    visual: document.getElementById('visual'),
    tempEl: document.getElementById('temp'),
    descEl: document.getElementById('desc'),
    cityEl: document.getElementById('city'),
    timeEl: document.getElementById('time'),
    metaEl: document.getElementById('meta'),
    randomBtn: document.getElementById('randomBtn'),
    unitToggle: document.getElementById('unitToggle'),
    unitLabel: document.getElementById('unitLabel'),
    toggleAnimBtn: document.getElementById('toggleAnimBtn'),
    animEnabled: true,
    state: {}
  };

  function randInt(min,max){
    return Math.floor(Math.random()*(max-min+1))+min;
  }

  function choose(arr){ return arr[randInt(0,arr.length-1)]; }

  function cToF(c){ return Math.round(c * 9/5 + 32); }
  function fToC(f){ return Math.round((f - 32) * 5/9); }

  function renderVisual(typeId){
    app.visual.innerHTML = '';
    app.metaEl.textContent = 'Â§©Ê∞ó„Ç®„Éï„Çß„ÇØ„Éà: ' + typeId;
    if(!app.animEnabled){
      // static simple emoji
      const big = document.createElement('div');
      big.style.fontSize = '54px';
      big.style.opacity = '0.95';
      big.textContent = weatherTypes.find(w=>w.id===typeId).emoji;
      app.visual.appendChild(big);
      return;
    }

    if(typeId === 'sunny'){
      const sun = document.createElement('div');
      sun.className = 'sun';
      app.visual.appendChild(sun);
    } else if(typeId === 'cloudy'){
      const cloud = document.createElement('div');
      cloud.className = 'cloud';
      app.visual.appendChild(cloud);
      // little sun peeking
      const sun = document.createElement('div');
      sun.className='sun';
      sun.style.width='46px'; sun.style.height='46px';
      sun.style.position='absolute'; sun.style.right='8px'; sun.style.bottom='8px';
      sun.style.animationDuration='18s';
      sun.style.opacity='0.85';
      app.visual.appendChild(sun);
    } else if(typeId === 'rain' || typeId === 'storm'){
      const cloud = document.createElement('div');
      cloud.className = 'cloud';
      cloud.style.left = '10px';
      cloud.style.top = '6px';
      app.visual.appendChild(cloud);

      const rain = document.createElement('div');
      rain.className = 'rain';
      app.visual.appendChild(rain);

      const drops = 12;
      for(let i=0;i<drops;i++){
        const d = document.createElement('div');
        d.className='drop';
        d.style.left = (10 + Math.random()*120) + 'px';
        d.style.animationDelay = (Math.random()*0.8) + 's';
        d.style.height = (10 + Math.random()*12) + 'px';
        d.style.opacity = 0.7 + Math.random()*0.3;
        rain.appendChild(d);
      }

      if(typeId === 'storm'){
        // flash effect
        const flash = document.createElement('div');
        flash.style.position='absolute';
        flash.style.inset='0';
        flash.style.pointerEvents='none';
        flash.style.animation = 'storm-flash 3s linear infinite';
        flash.style.background='linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,0))';
        app.visual.appendChild(flash);
        // small keyframes dynamically
        const style = document.createElement('style');
        style.textContent = `
          @keyframes storm-flash{
            0%,80%{opacity:0}
            85%{opacity:0.25}
            88%{opacity:0}
            95%{opacity:0.18}
            100%{opacity:0}
          }`;
        document.head.appendChild(style);
      }
    } else if(typeId === 'snow'){
      const cloud = document.createElement('div');
      cloud.className = 'cloud';
      cloud.style.left = '6px';
      cloud.style.top = '6px';
      app.visual.appendChild(cloud);

      const snow = document.createElement('div');
      snow.className = 'snow';
      app.visual.appendChild(snow);

      const flakes = 14;
      for(let i=0;i<flakes;i++){
        const f = document.createElement('div');
        f.className='flake';
        f.style.left = (Math.random()*100) + 'px';
        f.style.top = (Math.random()*20 - 10) + 'px';
        f.style.opacity = 0.6 + Math.random()*0.4;
        f.style.animationDuration = (4 + Math.random()*5) + 's';
        f.style.transform = 'translateY(-10px)';
        snow.appendChild(f);
      }
    } else if(typeId === 'fog'){
      const fog = document.createElement('div');
      fog.style.position='absolute';
      fog.style.inset='0';
      fog.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03))';
      fog.style.filter = 'blur(6px)';
      fog.style.opacity = 0.8;
      fog.style.animation = 'float-cloud 7s ease-in-out infinite';
      app.visual.appendChild(fog);

      const small = document.createElement('div');
      small.style.position='absolute';
      small.style.left='10px';
      small.style.top='30px';
      small.style.width='100px';
      small.style.height='40px';
      small.style.background='linear-gradient(180deg,#eef2f7,#dfe7ef)';
      small.style.borderRadius='40px';
      small.style.opacity=0.7;
      app.visual.appendChild(small);
    }
  }

  function updateUI(state){
    const { city, weather, tempC, time } = state;
    app.cityEl.textContent = city;
    app.timeEl.textContent = time;
    const useF = app.unitToggle.checked;
    app.tempEl.textContent = (useF ? cToF(tempC) : tempC) + (useF ? '¬∞F' : '¬∞C');
    app.unitLabel.textContent = useF ? '‚Ñâ' : '‚ÑÉ';
    app.descEl.textContent = weather.name;
    renderVisual(weather.id);
  }

  function generate(){
    const city = choose(cities);
    const weather = choose(weatherTypes);
    const tempRange = weather.tempRange;
    const tempC = randInt(tempRange[0], tempRange[1]);
    const time = (new Date()).toLocaleString('ja-JP');
    app.state = { city, weather, tempC, time };
    updateUI(app.state);
  }

  // initial
  generate();

  // events
  app.randomBtn.addEventListener('click', ()=> {
    generate();
  });

  app.unitToggle.addEventListener('change', ()=>{
    // only update displayed temp
    updateUI(app.state);
  });

  app.toggleAnimBtn.addEventListener('click', ()=>{
    app.animEnabled = !app.animEnabled;
    app.toggleAnimBtn.textContent = app.animEnabled ? '„Ç¢„Éã„É°ÊúâÂäπ' : '„Ç¢„Éã„É°ÁÑ°Âäπ';
    updateUI(app.state);
  });

  // keyboard: space to random
  window.addEventListener('keydown', (e)=>{
    if(e.code === 'Space') {
      e.preventDefault();
      generate();
    }
  });

})();
</script>
</body>
</html>
